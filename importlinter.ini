[importlinter]
root_package = core

[contract:layers]
name = Enforce layered architecture
type = layers
layers =
    core.domain
    core.ports
    core.persistence
    core.services
    core.generation
    core.agents
    core.engine
    core.interfaces

[contract:domain_forbidden]
name = Domain must not import outer layers
type = forbidden
source_modules =
    core.domain
forbidden_modules =
    core.engine
    core.services
    core.persistence
    core.agents
    core.interfaces
    core.ports
    core.generation

[contract:ports_only_domain]
name = Ports may only depend on Domain
type = forbidden
source_modules =
    core.ports
forbidden_modules =
    core.engine
    core.services
    core.persistence
    core.agents
    core.interfaces
    core.generation

[contract:services_only_ports_domain]
name = Services may only depend on Ports and Domain
type = forbidden
source_modules =
    core.services
forbidden_modules =
    core.engine
    core.persistence
    core.agents
    core.interfaces
    core.generation

[contract:engine_no_interfaces]
name = Engine must not depend on Interfaces
type = forbidden
source_modules =
    core.engine
forbidden_modules =
    core.interfaces
